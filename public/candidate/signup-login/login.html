<!--HTML for the login page. Contains labels and input places for the user to put in info-->
<!DOCTYPE html>
<htmL>
  <head>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
    <script src="/__/firebase/init.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Lato:100" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="login.css">
  </head>
  <script type="text/javascript" src="../../Authentication/authentication.js"></script>
  <body>
    <div class="main-container">
      <form>
        <div class="container">
          <h1 class="login" id="text">Login</h1>
          <label class="email" id="text">Email</label>
          <input class type="text" placeholder="Enter email" name="email" id="email" required>
          <label class="password" id="text">Password</label>
          <input type="password" placeholder="Enter password" name="password" id="password" required>
          <div class="enter">
            <button type="button" class="cancelButton">Cancel</button>
            <input type="button" class="loginButton" value="Login" onclick=toggleSignIn()>    
          </div>
          <div class="signup-route">
            <h3 id="signup">Don't have an account?</h3>
            <span tabindex="-1" class="signup"><input type="button" class="signup" id="text" onclick="location.href='../signup-login/signup.html';" value="Signup"/></span>
          </div>
          </div>
      </form>
    </div>
  </body>
  <script type="text/javascript"> 

  function toggleSignIn() {
    if (firebase.auth().currentUser) {
      // [START signout]
      firebase.auth().signOut();
      // [END signout]
      } else {
        //alert('signing you in')
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

        if (email.length < 4) {
          alert('Please enter an email address.');
          return;
        }

        if (password.length < 4) {
          alert('Please enter a password.');
          return;
        }

        // Sign in with email and pass.
        // [START authwithemail]
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // [START_EXCLUDE]
          if (errorCode === 'auth/wrong-password') {
            alert('Wrong password.');
          } else {
            alert(errorMessage);
          }
          console.log(error);
          document.getElementById('quickstart-sign-in').disabled = false;
          // [END_EXCLUDE]
        });
          // [END authwithemail]
      }
      document.getElementById('quickstart-sign-in').disabled = true;
      top.location.href = "../user-profile/user.html";
    }
  </script>
</htmL>